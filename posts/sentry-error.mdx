---
title: 'Sentry로 우아하게 에러 추적하기 (작성중)'
date: '2022-02-25'
excerpt: '장애는 항상 빠르게 감지되고 해소되어야한다. sentry를 이용하여 프론트엔드 에러를 빠르게 감지하고 추적할 수 있는 방법을 알아보자.'
tags: ['react', 'sentry']
published: true
---

# 장애(Incident)

장애라는 단어는 겪을 때마다 적응이 안되는 단어이면서 상황이다.
"페이지가 안떠요" 또는 "특정 디바이스에서 동작하지 않아요" 와 같은 CS를 받게 되면 심장박동이 크게 증가한다.
혹여나 내가 작성한 코드가 잘못된 것이 아닐까 하는 조바심과 불안감 때문일 것이다.

서비스를 제공하는 기업의 입장에서 대형 서비스 장애는 매출 하락으로 이어질 수도 있고 또한 사용자와 쌓아왔던 신뢰를 잃을 수도 있다.
그만큼 장애 탐지와 대응은 신속하고 정확하게 이루어져야 한다. 장애 탐지와 대응은 backend 고유의 영역으로 여겨져 오기도 했던 것 같다.
장애의 원인은 파악하기 전까진 인프라의 이슈인지 데이터의 이슈인지 화면의 이슈인지 알 수가 없다.
(필자는 여러 가지 종류의 장애를 겪어봤는데 제일 기억에 남았던 장애는 내가 배치 배포를 제대로 안해서 다음날 사용자에게 push를 가게 만든 장애가 제일 기억에 남는다.)

서비스의 복잡도가 증가하고 있는 요즘, frontend에서도 장애에 대한 탐지나 파악을 조금씩 깊히 들여다 봐야할 때가 오지 않았나 생각한다.
그러면, frontend에서(특히 웹뷰환경)에서 발생하는 장애는 어떤 방법으로 탐지하고 파악하여 해결할 수 있을까?

# 프론트엔드 장애

프론트엔드에서 장애나 에러는 대부분 크게 `데이터영역`, `화면영역`의 두가지 상황에서 발생한다.
물론 네트워크 이슈, OS 업데이트 또는 예상치 못한 런타임 에러도 충분히 발생할 수 있다.
그러나, QA 과정을 거쳐 배포되는 시스템의 경우에는 대부분 이 두 가지 상황을 크게 벗어나지 않는다.

# Sentry

> Working Code, Happy Customers

![sentry](/images/sentry02.png)

```sh
npm i react
```

```ts
import * as Sentry from '@sentry/browser';

export function initSentry() {
  Sentry.init({
    dsn: 'dsn key',
    release: 'release version',
    environment: 'production',
    integrations: [
      new Sentry.Integrations.Breadcrumbs({
        console: true,
      }),
    ],
  });
}
```
